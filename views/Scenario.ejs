<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Scenario Based</title>
  </head>
  <div id="google_translate_element">
    <!-- Load the Google Translate script -->
    <script type="text/javascript">
      function loadGoogleTranslate() {
        new google.translate.TranslateElement(
          {
            pageLanguage: "en",
          },
          "google_translate_element"
        );
      }
    </script>
    <script
      type="text/javascript"
      src="https://translate.google.com/translate_a/element.js?cb=loadGoogleTranslate"
    ></script>
  </div>
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700&display=swap");

    body {
      font-family: "Merriweather", serif;
      background: url("https://firebasestorage.googleapis.com/v0/b/chatapp-dae72.appspot.com/o/techcoders%2Fscenario2.jpeg.jpg06a06c80-98ff-4a5a-abd4-9adfbd99cdec?alt=media&token=e4902eb1-eeff-4e7c-a336-63576be6a3df ")
        no-repeat center center fixed;
      background-size: cover;
      color: #333;
      margin: 0;
      padding: 0;
      height: 100vh;
      display: flex;
      justify-content: flex-start;
      align-items: center;
      font-size: large;
    }

    .container {
      max-width: 800px;
      background-color: rgba(255, 127, 62, 0.7);
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
      text-align: center;
      margin: 20px;
      height: 90vh;
    }

    .container h1 {
      color: #333;
    }

    h1 {
      color: #f6f1f1;
      font-size: 2.5em;
      margin-bottom: 20px;
    }

    #instructions {
      background-color: #fff3e0;
      border-radius: 0.5rem;
      padding: 1.5rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      max-width: 42rem;
      margin: 2rem auto;
    }

    #instructions p {
      color: #333;
      text-align: center;
    }

    #instructions h3 {
      font-size: 1.5rem;
      font-weight: bold;
      color: #d84315;
      margin-bottom: 1rem;
    }

    #instructions h4 {
      font-size: 1.25rem;
      font-weight: 600;
      color: #ef6c00;
      margin-bottom: 0.75rem;
    }

    #instructions ol {
      list-style-type: decimal;
      list-style-position: inside;
      padding-left: 0;
    }

    #instructions li {
      margin-bottom: 0.5rem;
      color: #3e2723;
    }

    #instructions li:first-child,
    #instructions li:last-child {
      font-weight: 600;
    }

    #instructions ol {
      margin-top: 0.5rem;
    }

    #quiz-container {
      margin-bottom: 30px;
      min-height: 250px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
      min-width: 700px;
    }

    .question {
      position: absolute;
      width: 100%;
      opacity: 0;
      transition: opacity 0.5s ease;
    }

    .question.active {
      opacity: 1;
    }

    label {
      display: block;
      margin: 10px 0;
      cursor: pointer;
      text-align: left;
    }

    input[type="text"] {
      box-sizing: border-box;
    }

    input[type="radio"] {
      margin-right: 10px;
      transform: scale(1.2);
    }

    button {
      display: inline-block;
      background-color: #bea97d;
      color: #fff;
      padding: 10px;
      margin-bottom: 10px; /* Reduce the bottom margin */
      border: none;
      border-radius: 10px;
      font-size: 1.5em;
      cursor: pointer;
      box-shadow: 0 5px #0d3240;
      transition: all 0.3s ease;
      margin-top: 10px;
      width: 200px;
    }

    button:hover {
      background-color: #c48425;
      box-shadow: 0 3px #a87919;
      transform: translateY(-3px);
    }

    button:active {
      box-shadow: 0 2px #4d7874;
      transform: translateY(-1px);
    }

    label {
      display: block;
      margin: 10px 0;
      cursor: pointer;
      text-align: left;
      color: #ffffff;
    }

    p {
      display: block;
      margin: 10px 0;
      cursor: pointer;
      text-align: left;
      color: #ffffff;
    }

    #result {
      margin-top: 30px;
      font-size: 1.8em;
      color: #a5b554;
      display: none;
      animation: fadeIn 1s ease;
    }

    #google_translate_element {
      position: absolute;
      top: 10px;
      right: 10px;
      margin-top: 0;
      padding: 5px;
      background-color: rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      z-index: 1000;
    }

    #google_translate_element select {
      background-color: #fcdc94;
      color: #4a4a4a;
      border: 1px solid #78aba8;
      border-radius: 4px;
      padding: 5px;
      font-family: "Montserrat", sans-serif;
      font-size: 14px;
      outline: none;
    }

    #google_translate_element select:hover {
      border-color: #ef9c66;
    }

    #google_translate_element img {
      display: none;
    }

    @keyframes fadeIn {
      0% {
        opacity: 0;
      }
      100% {
        opacity: 1;
      }
    }
  </style>
  <body>
    <div class="container">
      <h1>Scenario Based Assessment</h1>
      <section id="instructions">
        <h3>
          <p>Scenario-Based Constitution Quiz Instructions:</p>
        </h3>
        <h4>Welcome to the Scenario-Based Constitution Quiz!</h4>
        <ol>
          <li>How to Answer:</li>
          <li>
            Read the Scenario: Carefully review each question related to the
            Indian Constitution.
          </li>
          <li>
            Provide the Correct Answer: Type the precise one-word or short
            answer in the text field or select the correct option if it's a
            multiple-choice question.
          </li>
          <li>
            Be Accurate: Ensure your answers are specific to the scenario.
          </li>
          <li>
            Check Your Answer: Verify your response before proceeding. Accuracy
            will earn you points!
          </li>
          <li>Good luck!</li>
        </ol>
      </section>
      <div id="quiz-container">
        <!-- Questions will be dynamically inserted here -->
      </div>
      <button id="next-button" onclick="nextQuestion()">Next</button>
      <div id="result"></div>
    </div>

    <script src="script.js"></script>
  </body>
  <script>
    const questions = [
      {
        question:
          "Scenario: A law passed by the Parliament of India is found to violate the Fundamental Rights guaranteed by the Constitution. What power allows the Supreme Court to strike down this law?",
        correctAnswer: "Judicial Review",
      },
      {
        question:
          "Scenario: The President of India declares a financial emergency due to a severe economic crisis. Under which Article of the Constitution can this be done?",
        correctAnswer: "Article 360",
      },
      {
        question:
          "Scenario: A state government passes a law that is in direct conflict with an existing central law on the same subject. Which law will prevail?",
        correctAnswer: "Central",
      },
      {
        question:
          "Scenario: A state government passes a law that is in direct conflict with an existing central law on the same subject. Which law will prevail?",
        correctAnswer: "Central",
      },
      {
        question:
          "Scenario: A citizen of India petitions the Supreme Court for the enforcement of her Fundamental Rights. Which type of jurisdiction allows the Supreme Court to hear this case?",
        correctAnswer: "Original",
      },
      {
        question:
          "Scenario: A new state is created by altering the boundaries of an existing state. Under which Article can this be done by the Parliament?",
        correctAnswer: "Article 3",
      },
      {
        question:
          "Scenario: The Constitution provides for the establishment of the Election Commission to supervise and conduct elections. Who appoints the Chief Election Commissioner?",
        correctAnswer: "President",
      },
      {
        question:
          "Scenario: The Directive Principles of State Policy are guidelines for the government but are not enforceable in a court of law. What are they considered as?",
        correctAnswer: "Non-justiciable",
      },
      {
        question:
          "Scenario: The Constitution of India was adopted on a specific date by the Constituent Assembly. What is this date?",
        correctAnswer: "26th November 1949",
      },
      {
        question:
          "Scenario: The Indian Parliament consists of two houses. One of them is the Lok Sabha. What is the other house called?",
        correctAnswer: "Rajya Sabha",
      },
      {
        question:
          "Scenario: A law passed by a state legislature requires the President's assent before it can become effective. This is because the law conflicts with a central law. What is this process called?",
        correctAnswer: "Assent",
      },
    ];

    let currentQuestionIndex = 0;
    let score = 0;
    let shuffledQuestions = [];

    function shuffleQuestions() {
      shuffledQuestions = questions.sort(() => Math.random() - 0.5);
    }

    function loadQuestion(index) {
      const quizContainer = document.getElementById("quiz-container");
      quizContainer.innerHTML = "";

      const questionObj = shuffledQuestions[index];
      const questionElement = document.createElement("div");
      questionElement.className = "question active";

      if (questionObj.options) {
        // Multiple choice question
        questionElement.innerHTML = `
        <p>${questionObj.question}</p>
        ${questionObj.options
          .map(
            (option, i) => `
            <label style="display: block; margin-bottom: 8px;">
              <input type="radio" name="answer" value="${String.fromCharCode(
                97 + i
              )}" style="margin-right: 8px;"> 
              ${option}
            </label>
        `
          )
          .join("")}
    `;
      } else {
        // Text input question
        questionElement.innerHTML = `
        <p>${questionObj.question}</p>
        <input type="text" name="answer" id="text-answer" 
          style="width: 100%; padding: 10px; margin-top: 8px; font-size: 16px; border: 1px solid #ccc; border-radius: 4px;" 
          placeholder="Type your answer here" />
    `;
      }

      quizContainer.appendChild(questionElement);
    }

    function nextQuestion() {
      const textAnswer = document.getElementById("text-answer");
      const selectedAnswer = document.querySelector(
        'input[name="answer"]:checked'
      );

      let userAnswer = "";
      if (textAnswer) {
        userAnswer = textAnswer.value.trim();
      } else if (selectedAnswer) {
        userAnswer = selectedAnswer.parentNode.textContent.trim();
      }

      if (userAnswer) {
        const correctAnswer =
          shuffledQuestions[currentQuestionIndex].correctAnswer.trim();

        if (userAnswer.toLowerCase() === correctAnswer.toLowerCase()) {
          score += 2;
        }
        currentQuestionIndex++;
        if (currentQuestionIndex < shuffledQuestions.length) {
          loadQuestion(currentQuestionIndex);
        } else {
          showResult();
        }
      } else {
        alert("Please enter or select an answer before proceeding.");
      }
    }

    function showResult() {
      const result = document.getElementById("result");
      result.textContent = `You got ${score / 2} out of ${
        shuffledQuestions.length
      } correct, with a total score of ${score}.`;
      result.style.display = "block";
      document.getElementById("next-button").style.display = "none";

      sendScoreToServer(score);
    }

    function sendScoreToServer(score) {
      fetch("/update-score", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({ score: score }),
      })
        .then((response) => response.json())
        .then((data) => {
          console.log("Score saved successfully:", data);
        })
        .catch((error) => {
          console.error("Error saving score:", error);
        });
    }

    document.addEventListener("DOMContentLoaded", () => {
      shuffleQuestions();
      loadQuestion(currentQuestionIndex);
    });
  </script>
</html>
